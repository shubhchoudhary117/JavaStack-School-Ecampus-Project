/*
 *             Copyright (c) 2016 - 2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0xb73f45}from'ckeditor5/src/core';import{ButtonView as _0x385cd0,View as _0x55cc7f,Notification as _0x3ff111}from'ckeditor5/src/ui';import _0x14de4b from'./exportpdfcommand';import _0x25f291 from'../theme/icons/exportpdf.svg';import'../theme/exportpdf.css';export default class p extends _0xb73f45{static get['pluginName'](){return'ExportPdf';}static get['requires'](){return['CloudServices',_0x3ff111];}['init'](){const _0x4e46a3=this['editor'],t=_0x4e46a3['t'],_0x3dd28e=_0x4e46a3['config']['get']('exportPdf')||{};_0x4e46a3['commands']['add']('exportPdf',new _0x14de4b(_0x4e46a3)),_0x4e46a3['ui']['componentFactory']['add']('exportPdf',_0x19431b=>{const _0x4fa98e=_0x4e46a3['commands']['get']('exportPdf'),_0x7fa371=new _0x385cd0(_0x19431b);_0x7fa371['set']({'label':t('Export\x20to\x20PDF'),'icon':_0x25f291,'tooltip':!0x0}),_0x7fa371['bind']('isOn','isEnabled')['to'](_0x4fa98e,'isBusy','isEnabled'),_0x7fa371['extendTemplate']({'attributes':{'class':[_0x7fa371['bindTemplate']['if']('isOn','ck-exportpdf_status-pending')]}});const _0x54ba96=new _0x55cc7f();return _0x54ba96['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner-container']},'children':[{'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner']}}]}),_0x7fa371['children']['add'](_0x54ba96),this['listenTo'](_0x7fa371,'execute',()=>{_0x4e46a3['execute']('exportPdf',_0x3dd28e),_0x4e46a3['editing']['view']['focus']();}),_0x7fa371;});const _0x301ac2=_0x4e46a3['plugins']['get']('CloudServices');!0x1===_0x3dd28e['tokenUrl']?this['_token']=null:_0x3dd28e['tokenUrl']?_0x301ac2['registerTokenUrl'](_0x3dd28e['tokenUrl'])['then'](_0x1f93b2=>{this['_token']=_0x1f93b2;}):this['_token']=_0x301ac2['token'];}}